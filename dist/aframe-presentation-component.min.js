!function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e){AFRAME.registerComponent("presentation",{schema:{camera:{type:"selector",default:"[camera]"},emitEventsOnScene:{type:"boolean",default:!1},keyboardShortcuts:{type:"boolean",default:!0},useHash:{type:"boolean",default:!0}},currentSlide:0,slides:[],init:function(){this.slides=this.el.querySelectorAll("[presentation-slide]"),this.data.keyboardShortcuts&&document.addEventListener("keyup",t=>this._onKey(t)),this.changeSlide(this.data.useHash&&window.location.hash?window.location.hash.substring(1):"0",!0);for(let t=0;t<this.currentSlide;t++)this._playAnimation(t,"to"),this._setupEntityVisibility(t,!1);this._playAnimation(this.currentSlide,"to")},changeSlide:function(t,e){const i=this.data.camera,n=this.slides[this.currentSlide],a=n.components["presentation-slide"].data.cameraPosition,s=n.components["presentation-slide"].data.cameraRotation;this.currentSlide=Math.max(0,Math.min(this.slides.length-1,this.currentSlide+t));const o=this.slides[this.currentSlide],r=o.components["presentation-slide"].data.cameraPosition,l=o.components["presentation-slide"].data.cameraRotation,c=o.components["presentation-slide"].data.cameraDuration;e?(i.setAttribute("position",r),i.setAttribute("rotation",l)):(i.setAttribute("animation__position",`property: position; dur: ${c}; easing: linear; from: ${a.x} ${a.y} ${a.z}; to: ${r.x} ${r.y} ${r.z}`),i.setAttribute("animation__rotation",`property: rotation; dur: ${c}; easing: linear; from: ${s.x} ${s.y} ${s.z}; to: ${l.x} ${l.y} ${l.z}`));const d=o.components["presentation-slide"].data.emitEvent;if(d){(this.data.emitEventsOnScene?this.el.sceneEl:this.el).dispatchEvent(new Event(d))}this._pauseAnimation(this.currentSlide),this._playAnimation(this.currentSlide),this._setupEntityVisibility(this.currentSlide,-1===t),this.data.useHash&&(window.location.hash=this.currentSlide.toString())},previousSlide:function(){0!==this.currentSlide&&(this._playAnimation(this.currentSlide,"prev"),this._setupEntityVisibility(this.currentSlide,!0),this.changeSlide(-1))},nextSlide:function(){this.currentSlide!==this.slides.length-1&&(this.changeSlide(1),this._playAnimation(this.currentSlide,"play"))},_playAnimation:function(t,e){const i=this.slides[t],n=i.components["presentation-slide"].data.animationsStart.map(t=>`__${t}`),a=i.components["presentation-slide"].data.animationsClass;a&&[].slice.call(document.querySelectorAll(`.${a}`)).forEach(t=>{n.forEach(i=>{const n=t.components[`animation${i}`];if(n)switch(e){case"from":case"to":const a=n.data.property,s=n.data[e];t.setAttribute(a,s);break;case"prev":t.setAttribute(`animation${i}`,"dir","reverse"),n.beginAnimation();break;case"play":t.setAttribute(`animation${i}`,"dir",""),n.beginAnimation()}})})},_pauseAnimation:function(t){const e=this.slides[t],i=e.components["presentation-slide"].data.animationsStart.map(t=>`__${t}`),n=e.components["presentation-slide"].data.animationsClass;n&&[].slice.call(document.querySelectorAll(n)).forEach(t=>{i.forEach(e=>{const i=t.components[`animation${e}`];i&&i._pauseAnimation()})})},_setupEntityVisibility:function(t,e){const i=this.slides[t].components["presentation-slide"].data;i.hideEntities.forEach(t=>{document.querySelectorAll(t).forEach(t=>{t.setAttribute("visible",e)})}),i.showEntities.forEach(t=>{document.querySelectorAll(t).forEach(t=>{t.setAttribute("visible",!e)})})},_onKey:function(t){switch(t.code){case"ArrowLeft":this.previousSlide();break;case"ArrowRight":this.nextSlide()}}}),AFRAME.registerComponent("presentation-slide",{schema:{animationsClass:{type:"string"},animationsPause:{type:"array",default:[""]},animationsStart:{type:"array",default:[""]},cameraDuration:{type:"number",default:1e3},cameraPosition:{type:"vec3"},cameraRotation:{type:"vec3"},emitEvent:{type:"string"},emitValues:{type:"array",default:[]},hideEntities:{type:"array",default:[]},showEntities:{type:"array",default:[]}}}),AFRAME.registerPrimitive("a-presentation",{defaultComponents:{presentation:{}},mappings:{camera:"presentation.camera","keyboard-shortcuts":"presentation.keyboardShortcuts","use-hash":"presentation.useHash"}}),AFRAME.registerPrimitive("a-presentation-slide",{defaultComponents:{"presentation-slide":{}},mappings:{"animations-class":"presentation-slide.animationsClass","animations-pause":"presentation-slide.animationsPause","animations-start":"presentation-slide.animationsStart","camera-duration":"presentation-slide.cameraDuration","camera-position":"presentation-slide.cameraPosition","camera-rotation":"presentation-slide.cameraRotation","emit-event":"presentation-slide.emitEvent","emit-values":"presentation-slide.emitValues","hide-entities":"presentation-slide.hideEntities","show-entities":"presentation-slide.showEntities"}})}]);